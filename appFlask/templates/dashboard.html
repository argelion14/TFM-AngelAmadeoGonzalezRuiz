{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block active_module_DASHBOARD %}active{% endblock %}

{% block header %}System Dashboard{% endblock %}

{% block path_main %}
<li class="breadcrumb-item"><a href="{{ url_for('index') }}">Home</a></li>
<li class="breadcrumb-item active">Dashboard</li>
{% endblock %}

{% block content %}
<div class="row">
    <!-- Usuarios -->
    <div class="col-lg-3 col-6">
        <div class="small-box bg-info">
            <div class="inner">
                <h3>{{ stats.total_users }}</h3>
                <p>Total Users</p>
            </div>
            <div class="icon"><i class="fas fa-users"></i></div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <div class="small-box bg-warning">
            <div class="inner">
                <h3>{{ stats.total_superusers }}</h3>
                <p>Superusers</p>
            </div>
            <div class="icon"><i class="fas fa-user-shield"></i></div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <div class="small-box bg-primary">
            <div class="inner">
                <h3>{{ stats.users_with_keys }}</h3>
                <p>Users with Active Keys</p>
            </div>
            <div class="icon"><i class="fas fa-key"></i></div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <div class="small-box bg-success">
            <div class="inner">
                <h3>{{ stats.active_key_ratio }}%</h3>
                <p>Key Activation Rate</p>
            </div>
            <div class="icon"><i class="fas fa-percentage"></i></div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Roles y Grants -->
    <div class="col-lg-3 col-6">
        <div class="small-box bg-dark">
            <div class="inner">
                <h3>{{ stats.total_roles }}</h3>
                <p>Total Roles</p>
            </div>
            <div class="icon"><i class="fas fa-user-tag"></i></div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <div class="small-box bg-secondary">
            <div class="inner">
                <h3>{{ stats.roles_with_grants }}</h3>
                <p>Roles Linked to Grants</p>
            </div>
            <div class="icon"><i class="fas fa-link"></i></div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <div class="small-box bg-danger">
            <div class="inner">
                <h3>{{ stats.total_grants }}</h3>
                <p>Grant Templates</p>
            </div>
            <div class="icon"><i class="fas fa-certificate"></i></div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <div class="small-box bg-info">
            <div class="inner">
                <h3>{{ stats.grant_rules_count }}</h3>
                <p>Rules Linked to Grants</p>
            </div>
            <div class="icon"><i class="fas fa-random"></i></div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Dominios, TÃ³picos y Reglas -->
    <div class="col-lg-3 col-6">
        <div class="small-box bg-teal">
            <div class="inner">
                <h3>{{ stats.total_domains }}</h3>
                <p>Domains</p>
            </div>
            <div class="icon"><i class="fas fa-globe"></i></div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <div class="small-box bg-indigo">
            <div class="inner">
                <h3>{{ stats.total_topics }}</h3>
                <p>Topics</p>
            </div>
            <div class="icon"><i class="fas fa-comments"></i></div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <div class="small-box bg-light">
            <div class="inner">
                <h3>{{ stats.total_rules }}</h3>
                <p>Total Rules</p>
            </div>
            <div class="icon"><i class="fas fa-gavel"></i></div>
        </div>
    </div>
    <div class="col-lg-3 col-6">
        <div class="small-box bg-lightblue">
            <div class="inner">
                <h3>{{ stats.rules_with_domains }}</h3>
                <p>Rules with Domains</p>
            </div>
            <div class="icon"><i class="fas fa-network-wired"></i></div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-3 col-6">
        <div class="small-box bg-orange">
            <div class="inner">
                <h3>{{ stats.rules_with_topics }}</h3>
                <p>Rules with Topics</p>
            </div>
            <div class="icon"><i class="fas fa-stream"></i></div>
        </div>
    </div>
</div>
{% endblock %}